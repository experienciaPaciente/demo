const datosRegiones = {
  "Total Nacional (31 aglomerados urbanos)": {
    "Pobreza": {
      "Porcentaje": 52.9,
      "CantidadPersonas": '24.455.670' 
    },
    "Indigencia": {
      "Porcentaje": 18.1,
      "CantidadPersonas": '8.367.630' 
    }
  },
  "Aglomerados del interior": {
    "Pobreza": {
      "Porcentaje": 53.0,
      "CantidadPersonas": '7.471.000' 
    },
    "Indigencia": {
      "Porcentaje": 16.2,
      "CantidadPersonas": '2.282.000' 
    }
  },
  "Regiones": {
    "Gran Buenos Aires": {
      "Pobreza": {
        "Porcentaje": 52.8,
        "CantidadPersonas": '8.202.000' 
      },
      "Indigencia": {
        "Porcentaje": 19.8,
        "CantidadPersonas": '3.077.000' 
      }
    },
    "Ciudad Autónoma de Buenos Aires": {
      "Pobreza": {
        "Porcentaje": 23.1,
        "CantidadPersonas": '716.100' 
      },
      "Indigencia": {
        "Porcentaje": 7.5,
        "CantidadPersonas": '232.500' 
      }
    },
    "Partidos del GBA": {
      "Pobreza": {
        "Porcentaje": 59.7,
        "CantidadPersonas": '7.484.000' 
      },
      "Indigencia": {
        "Porcentaje": 22.7,
        "CantidadPersonas": '2.845.000' 
      }
    },
    "Cuyo": {
      "Pobreza": {
        "Porcentaje": 52.3,
        "CantidadPersonas": '1.139.000' 
      },
      "Indigencia": {
        "Porcentaje": 13.5,
        "CantidadPersonas": '294.000' 
      }
    },
    "Gran Mendoza": {
      "Pobreza": {
        "Porcentaje": 52.9,
        "CantidadPersonas": '630.000' 
      },
      "Indigencia": {
        "Porcentaje": 13.8,
        "CantidadPersonas": '164.000' 
      }
    },
    "Gran San Juan": {
      "Pobreza": {
        "Porcentaje": 50.5,
        "CantidadPersonas": '301.000' 
      },
      "Indigencia": {
        "Porcentaje": 14.7,
        "CantidadPersonas": '87.000' 
      }
    },
    "Gran San Luis": {
      "Pobreza": {
        "Porcentaje": 53.8,
        "CantidadPersonas": '158.000' 
      },
      "Indigencia": {
        "Porcentaje": 9.8,
        "CantidadPersonas": '29.000' 
      }
    },
    "Noreste": {
      "Pobreza": {
        "Porcentaje": 62.9,
        "CantidadPersonas": '1.428.000' 
      },
      "Indigencia": {
        "Porcentaje": 23.2,
        "CantidadPersonas": '526.000' 
      }
    },
    "Corrientes": {
      "Pobreza": {
        "Porcentaje": 52.3,
        "CantidadPersonas": '230.000' 
      },
      "Indigencia": {
        "Porcentaje": 13.4,
        "CantidadPersonas": '59.000' 
      }
    },
    "Formosa": {
      "Pobreza": {
        "Porcentaje": 67.6,
        "CantidadPersonas": '220.000' 
      },
      "Indigencia": {
        "Porcentaje": 19.8,
        "CantidadPersonas": '65.000' 
      }
    },
    "Gran Resistencia": {
      "Pobreza": {
        "Porcentaje": 76.2,
        "CantidadPersonas": '290.000' 
      },
      "Indigencia": {
        "Porcentaje": 38.6,
        "CantidadPersonas": '147.000' 
      }
    },
    "Posadas": {
      "Pobreza": {
        "Porcentaje": 55.9,
        "CantidadPersonas": '350.000' 
      },
      "Indigencia": {
        "Porcentaje": 18.3,
        "CantidadPersonas": '115.000' 
      }
    },
    "Noroeste": {
      "Pobreza": {
        "Porcentaje": 57.0,
        "CantidadPersonas": '1458.000' 
      },
      "Indigencia": {
        "Porcentaje": 17.2,
        "CantidadPersonas": '440.000' 
      }
    },
    "Gran Catamarca": {
      "Pobreza": {
        "Porcentaje": 55.9,
        "CantidadPersonas": '190.000' 
      },
      "Indigencia": {
        "Porcentaje": 16.9,
        "CantidadPersonas": '58.000' 
      }
    },
    "Gran Tucumán-Tafí Viejo": {
      "Pobreza": {
        "Porcentaje": 55.8,
        "CantidadPersonas": '570.000' 
      },
      "Indigencia": {
        "Porcentaje": 16.6,
        "CantidadPersonas": '170.000' 
      }
    },
    "Jujuy-Palpalá": {
      "Pobreza": {
        "Porcentaje": 55.7,
        "CantidadPersonas": '250.000' 
      },
      "Indigencia": {
        "Porcentaje": 15.3,
        "CantidadPersonas": '69.000' 
      }
    },
    "La Rioja": {
      "Pobreza": {
        "Porcentaje": 66.4,
        "CantidadPersonas": '190.000' 
      },
      "Indigencia": {
        "Porcentaje": 15.0,
        "CantidadPersonas": '43.000' 
      }
    },
    "Salta": {
      "Pobreza": {
        "Porcentaje": 52.2,
        "CantidadPersonas": '620.000' 
      },
      "Indigencia": {
        "Porcentaje": 16.5,
        "CantidadPersonas": '196.000' 
      }
    },
    "Santiago del Estero-La Banda": {
      "Pobreza": {
        "Porcentaje": 64.0,
        "CantidadPersonas": '390.000' 
      },
      "Indigencia": {
        "Porcentaje": 22.9,
        "CantidadPersonas": '140.000' 
      }
    },
    "Pampeana": {
      "Pobreza": {
        "Porcentaje": 49.9,
        "CantidadPersonas": '2.669.000' 
      },
      "Indigencia": {
        "Porcentaje": 15.9,
        "CantidadPersonas": '849.000' 
      }
    },
    "Bahía Blanca-Cerri": {
      "Pobreza": {
        "Porcentaje": 44.4,
        "CantidadPersonas": '204.000' 
      },
      "Indigencia": {
        "Porcentaje": 13.9,
        "CantidadPersonas": '64.000' 
      }
    },
    "Concordia": {
      "Pobreza": {
        "Porcentaje": 65.8,
        "CantidadPersonas": '164.000' 
      },
      "Indigencia": {
        "Porcentaje": 26.4,
        "CantidadPersonas": '66.000' 
      }
    },
    "Gran Córdoba": {
      "Pobreza": {
        "Porcentaje": 49.5,
        "CantidadPersonas": '856.000' 
      },
      "Indigencia": {
        "Porcentaje": 12.8,
        "CantidadPersonas": '221.000' 
      }
    },
    "Gran La Plata": {
      "Pobreza": {
        "Porcentaje": 51.2,
        "CantidadPersonas": '740.000' 
      },
      "Indigencia": {
        "Porcentaje": 18.3,
        "CantidadPersonas": '264.000' 
      }
    },
    "Gran Rosario": {
      "Pobreza": {
        "Porcentaje": 46.8,
        "CantidadPersonas": '780.000' 
      },
      "Indigencia": {
        "Porcentaje": 18.2,
        "CantidadPersonas": '303.000' 
      }
    },
    "Gran Paraná": {
      "Pobreza": {
        "Porcentaje": 46.7,
        "CantidadPersonas": '175.000' 
      },
      "Indigencia": {
        "Porcentaje": 11.7,
        "CantidadPersonas": '44.000' 
      }
    },
    "Gran Santa Fe": {
      "Pobreza": {
        "Porcentaje": 59.8,
        "CantidadPersonas": '470.000' 
      },
      "Indigencia": {
        "Porcentaje": 17.4,
        "CantidadPersonas": '137.000' 
      }
    },
    "Mar del Plata-Batán": {
      "Pobreza": {
        "Porcentaje": 40.7,
        "CantidadPersonas": '276.000' 
      },
      "Indigencia": {
        "Porcentaje": 11.8,
        "CantidadPersonas": '80.000' 
      }
    },
    "Neuquén-Plottier": {
      "Pobreza": {
        "Porcentaje": 40.4,
        "CantidadPersonas": '-' 
      },
      "Indigencia": {
        "Porcentaje": 11.6,
        "CantidadPersonas": '-' 
      }
    },
    "Río Cuarto": {
      "Pobreza": {
        "Porcentaje": 38.4,
        "CantidadPersonas": '78.000' 
      },
      "Indigencia": {
        "Porcentaje": 8.7,
        "CantidadPersonas": '18.000' 
      }
    },
    "Río Gallegos": {
      "Pobreza": {
        "Porcentaje": 53.8,
        "CantidadPersonas": '-' 
      },
      "Indigencia": {
        "Porcentaje": 10.0,
        "CantidadPersonas": '-' 
      }
    },
    "San Francisco": {
      "Pobreza": {
        "Porcentaje": 43.9,
        "CantidadPersonas": '47.000' 
      },
      "Indigencia": {
        "Porcentaje": 9.5,
        "CantidadPersonas": '10.000' 
      }
    },
    "San Nicolás-Villa Constitución": {
      "Pobreza": {
        "Porcentaje": 44.2,
        "CantidadPersonas": '134.000' 
      },
      "Indigencia": {
        "Porcentaje": 14.5,
        "CantidadPersonas": '44.000' 
      }
    },
    "Villa María-Villa Nueva": {
      "Pobreza": {
        "Porcentaje": 46.4,
        "CantidadPersonas": '78.000' 
      },
      "Indigencia": {
        "Porcentaje": 15.7,
        "CantidadPersonas": '26.000' 
      }
    },
    "Patagonia": {
      "Pobreza": {
        "Porcentaje": 45.3,
        "CantidadPersonas": '856.000' 
      },
      "Indigencia": {
        "Porcentaje": 12.5,
        "CantidadPersonas": '236.000' 
      }
    },
    "Comodoro Rivadavia-Rada Tilly": {
      "Pobreza": {
        "Porcentaje": 43.1,
        "CantidadPersonas": '144.000' 
      },
      "Indigencia": {
        "Porcentaje": 10.4,
        "CantidadPersonas": '35.000' 
      }
    }
  }
};


function actualizarBanderaPorRegion() {
  const select = document.getElementById("regionSelect");
  const regionSeleccionada = select.value;
  
  let datosSeleccionados;

  if (regionSeleccionada && datosRegiones["Regiones"][regionSeleccionada]) {
    datosSeleccionados = datosRegiones["Regiones"][regionSeleccionada];
  } else {
    datosSeleccionados = datosRegiones[regionSeleccionada];
  }
  
  if (!datosSeleccionados) {
    console.error('Región no encontrada:', regionSeleccionada);
    return;
  }

  const pobPorcentajeRegion = datosSeleccionados.Pobreza.Porcentaje;
  const indPorcentajeRegion = datosSeleccionados.Indigencia.Porcentaje;
  const middleStripeHeight = 100 - pobPorcentajeRegion - indPorcentajeRegion;
  
  const pobreza = document.getElementById("pobrezaRegion");
  const indigencia = document.getElementById("indigenciaRegion");

  document.getElementById('middleRegion').style.setProperty('--flag__stripe--height', middleStripeHeight + '%');

  pobreza.style.height = `${datosSeleccionados.Pobreza.Porcentaje}%`; 
  indigencia.style.height = `${datosSeleccionados.Indigencia.Porcentaje}%`; 

  const porcentajePob = document.getElementById("porcentaje-pob-region");
  const porcentajeInd = document.getElementById("porcentaje-ind-region");
  const personasPob = document.getElementById("personas-pob-region");
  const personasInd = document.getElementById("personas-ind-region");
  const holderSelected = document.getElementById("selectedRegion");

  const holderPorcentajePob = document.querySelector('.flag__output--pob');
  const holderPorcentajeInd = document.querySelector('.flag__output--ind');
  
  porcentajePob.textContent = `${datosSeleccionados.Pobreza.Porcentaje}%`;
  porcentajeInd.textContent = `${datosSeleccionados.Indigencia.Porcentaje}%`;

  holderPorcentajePob.textContent = `${datosSeleccionados.Pobreza.Porcentaje}%`;
  holderPorcentajeInd.textContent = `${datosSeleccionados.Indigencia.Porcentaje}%`;

  personasPob.textContent = `${datosSeleccionados.Pobreza.CantidadPersonas} personas`;
  personasInd.textContent = `${datosSeleccionados.Indigencia.CantidadPersonas} personas`;
  holderSelected.textContent = `${regionSeleccionada}`;

  // Blink effect
  indigencia.classList.add('stripe__blink--top');
  pobreza.classList.add('stripe__blink--bottom');
      setTimeout(function() {
        indigencia.classList.remove('stripe__blink--top');
        pobreza.classList.remove('stripe__blink--bottom');
    }, 3000);
 
}


function populateSelect() {

  const regionSelect = document.getElementById("regionSelect");

  for (const region in datosRegiones["Regiones"]) {
    const option = document.createElement("option");
    option.value = region;
    option.textContent = region;
    regionSelect.appendChild(option);
  }

  const totalOption = document.createElement("option");
  totalOption.value = "Total Nacional (31 aglomerados urbanos)";
  totalOption.textContent = "Total Nacional (31 aglomerados urbanos)";
  regionSelect.appendChild(totalOption);

  const interiorOption = document.createElement("option");
  interiorOption.value = "Aglomerados del interior";
  interiorOption.textContent = "Aglomerados del interior";
  regionSelect.appendChild(interiorOption);
}

  populateSelect();
